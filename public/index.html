<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>TubeKara - YouTube Karaoke made easy</title>
  <meta name="description" content="YouTube Karaoke Made Easy">
  <meta name="author" content="An Pham">
  <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular.min.js"></script>
  <script src="app.js"></script>
  <script src="controllers/controllers.js"></script>
  <script src="configs/routes.js"></script>
  <link rel="stylesheet" type="text/css" href="assets/stylesheets/style.css">
  <link rel="stylesheet" type="text/css" href="assets/stylesheets/font-awesome.min.css">
</head>

<body ng-app="TubeKara">
  <p id="welcome-text" ng-controller="MainCtrl">{{ welcome }}</p>
  <div id="search-form" ng-controller="MainCtrl">
    <form ng-submit="start(startSong)">
      <input ng-model="startSong" type="text" id="startSongInput" placeholder="Please enter your song">
      <input id="submit-song" type="submit" value="Start Singing!">
    </form>
  </div>
  <div id="main-wrapper">
    <iframe id="player-frame" class="hidden" frameborder="0" allowfullscreen="1" title="YouTube video player" src="https://www.youtube.com/embed/VwtAPeh4GOU?enablejsapi=1&origin=https%3A%2F%2Ftubekara.herokuapp.com"></iframe>
    <div id="user-control" class="hidden">
      <div id="control-wrapper">
        <div id="control-title">Play List</div>       
        <input ng-model="newSongInput" type="text" id="newSongInput" placeholder="Please add your next song">
        <i class="btn fa fa-plus fa-2x"></i>
      </div>
    </div>
  </div>
  <footer id="footer">
    <p>Developed by <a target="_blank" href="http://www.apresume.com">An Pham</a>. All rights reserved.</p>
  </footer>
  <script>
    $("#song").focus();
    $("#user-control").mouseenter(function() {
      $("#user-control").css("width", "20%");
      $("#control-wrapper").removeClass("hidden");
    });
    $("#user-control").mouseleave(function() {
      $("#user-control").css("width", "1%");
      $("#control-wrapper").addClass("hidden");
    });

    $("#startSongInput").keyup(function() {
      var search_input = $(this).val();
      var keyword= encodeURIComponent(search_input);
      var yt_url='http://gdata.youtube.com/feeds/api/videos?q='+keyword+'&max-results=7&v=2&alt=jsonc';

      $.ajax
      ({
        type: "GET",
        url: yt_url,
        dataType:"jsonp",
        success: function(response)
        {

          if(response.data.items)
          {
            $.each(response.data.items, function(i,data)
            {
              var video_id=data.id;
              var video_title=data.title;
              var video_viewCount=data.viewCount;
              console.log(video_title);
            });
          }
          else
          {
            console.log("No result found!");
          }
        }
      });
    });
  </script>
</body>
</html>